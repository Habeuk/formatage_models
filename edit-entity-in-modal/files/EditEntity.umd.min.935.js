"use strict";(("undefined"!==typeof self?self:this)["webpackChunkEditEntity"]=("undefined"!==typeof self?self:this)["webpackChunkEditEntity"]||[]).push([[935],{8935:function(e,t,n){n.r(t),n.d(t,{default:function(){return w}});var i=function(){var e=this,t=e._self._c;return t("div",[t("modalForm",{attrs:{"title-modal":e.titleModal,"manage-modal":e.manageModal},on:{closeModal:e.closeModal},scopedSlots:e._u([{key:"header",fn:function(){return[t("HCardIcon",{attrs:{"with-mb":!1},scopedSlots:e._u([{key:"titre",fn:function(){return[t("span",[e._v(" Modifier le contenu ")])]},proxy:!0},{key:"default",fn:function(){return[t("span",[e._v(" Veillez remplir les champs ci-dessous et enregistrer ")]),t("br"),t("span",[e._v(" En cas de probleme ou d'incomprehension , veillez nous "),t("a",{attrs:{href:"#"}},[e._v(" laisser un message ")])])]},proxy:!0}])})]},proxy:!0}])})],1)},o=[],r=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"b-modal-manage-project",title:"BootstrapVue",size:"lg","footer-bg-variant":"light","header-bg-variant":"light","hide-footer":!1,"no-close-on-backdrop":!1},on:{ok:e.handleOk},scopedSlots:e._u([{key:"modal-header",fn:function(){return[e._t("header")]},proxy:!0},{key:"default",fn:function(){return[t("formEdit",{ref:"formEdit"})]},proxy:!0},{key:"modal-footer",fn:function({cancel:n}){return[t("b-button",{attrs:{size:"md",variant:"info"},on:{click:e.handleOk}},[t("b-icon",{attrs:{icon:"save2",variant:"white"}}),e._v(" Enregister ")],1),t("b-button",{attrs:{size:"md",variant:"outline-secondary"},on:{click:function(e){return n()}}},[e._v(" Annuler ")])]}}],null,!0),model:{value:e.openModel,callback:function(t){e.openModel=t},expression:"openModel"}})},a=[],l=function(){var e=this,t=e._self._c;return t("div",[e.show?t("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit.apply(null,arguments)},reset:e.onReset}},e._l(e.buildFields(),(function(n,i){return t(n.template,{key:i,tag:"component",attrs:{entity:n.entity,"class-entity":["pt-1"]}},e._l(n.fields,(function(n,o){return t(n.template,{key:o,tag:"component",attrs:{field:n.field,model:n.model,entities:n.entities,"class-css":["mb-5"],"parent-name":i+".entity.","parent-child-name":i+".entities.","namespace-store":""},on:{addNewValue:function(t){return e.addNewValue(t,n)},removeField:function(t){return e.removeField(t,n)},array_move:function(t){return e.array_move(t,n)}}})})),1)})),1):e._e()],1)},s=[],d=(n(7658),n(6389)),u=n(8822),c=n(274),m=n(2866),h={props:{showSubmit:{type:Boolean,default:!1}},data(){return{show:!0}},computed:{...(0,u.rn)({currentEntityForm:e=>e.currentEntityForm}),idEntity(){if(""!==this.form.label){var e=d.Z.generateIdEntityType(this.form.label);return this.setId(e),e}return""}},methods:{onSubmit(e){this.submit()},submit(){return this.$store.dispatch("saveEntities")},onReset(e){e.preventDefault(),this.show=!1,this.$nextTick((()=>{this.show=!0}))},setId(e){this.form.uuid||(this.form.id=e)},buildFields(){var e=[];return m.Z.setConfig(d.Z),console.log("this.currentEntityForm  :",this.currentEntityForm),this.currentEntityForm.length&&(e=c.Z.generateFields(this.currentEntityForm,e)),e},addNewValue(e,t){this.model[t.field.name].push(e)},removeField(e,t){this.model[t.field.name].splice(e,1)},array_move(e,t){const n=(e,t,n)=>{let i=e.splice(t,1);return e.splice(n,0,i[0]),e},i=n(this.model[t.field.name],e.oldIndex,e.newIndex);this.$store.dispatch("setValue",{value:i,fieldName:t.field.name})}}},f=h,p=n(1001),y=(0,p.Z)(f,l,s,!1,null,null,null),v=y.exports,_={components:{formEdit:v},props:{manageModal:{type:Boolean,default:!1}},computed:{openModel:{get(){return!!this.manageModal},set(e){this.$emit("closeModal",e)}}},methods:{handleOk(e){e.preventDefault(),this.$refs.formEdit.submit().then((()=>{this.$bvModal.hide("b-modal-manage-project")})).catch((e=>{console.log("error : ",e)}))}}},b=_,E=(0,p.Z)(b,r,a,!1,null,null,null),g=E.exports,k={name:"EditEntity",components:{modalForm:g},data(){return{titleModal:"",manageModal:!1}},computed:{...(0,u.rn)({currentEntityInfo:e=>e.currentEntityInfo})},mounted(){this.check_edit_entity()},methods:{check_edit_entity(){document.addEventListener("formatage_models_data_quick_edit_vuejs",(e=>{e.detail&&e.detail.id&&(this.currentEntityInfo.id&&e.detail.id!=this.currentEntityInfo.id?this.$store.dispatch("cleanDatas").then((()=>{this.initEdit(e)})):this.initEdit(e))}),!1)},initEdit(e){console.log("initEdit : ",e.detail),this.openModal(),this.$store.dispatch("set_currentEntityForm",e.detail).then((()=>{this.$store.dispatch("loadForm")}))},openModal(){this.manageModal?this.manageModal=!1:this.manageModal=!0},closeModal(){this.manageModal=!1}}},M=k,F=(0,p.Z)(M,i,o,!1,null,null,null),w=F.exports}}]);
//# sourceMappingURL=EditEntity.umd.min.935.js.map