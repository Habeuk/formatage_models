"use strict";(("undefined"!==typeof self?self:this)["webpackChunkEditEntity"]=("undefined"!==typeof self?self:this)["webpackChunkEditEntity"]||[]).push([[17],{1017:function(e,t,s){s.r(t),s.d(t,{default:function(){return ms}});var a=function(){var e=this,t=e._self._c;return t("div",[t("modalForm",{attrs:{"title-modal":e.titleModal,"manage-modal":e.manageModal},on:{closeModal:e.closeModal},scopedSlots:e._u([{key:"header",fn:function(){return[t("HCardIcon",{attrs:{"with-mb":!1},scopedSlots:e._u([{key:"titre",fn:function(){return[t("span",[e._v(" Modifier le contenu ")])]},proxy:!0},{key:"default",fn:function(){return[t("span",[e._v(" Veillez remplir les champs ci-dessous et enregistrer ")]),t("br"),t("span",[e._v(" En cas de probleme ou d'incomprehension , veillez nous "),t("a",{attrs:{href:"#"}},[e._v(" laisser un message ")])])]},proxy:!0}])})]},proxy:!0}])})],1)},i=[],r=function(){var e=this,t=e._self._c;return t("b-modal",{attrs:{id:"b-modal-manage-project",title:"BootstrapVue",size:"lg","footer-bg-variant":"light","header-bg-variant":"light","hide-footer":!1,"no-close-on-backdrop":!1},on:{ok:e.handleOk},scopedSlots:e._u([{key:"modal-header",fn:function(){return[e._t("header")]},proxy:!0},{key:"default",fn:function(){return[t("formEdit",{ref:"formEdit"})]},proxy:!0},{key:"modal-footer",fn:function({cancel:s}){return[t("b-button",{attrs:{size:"md",variant:"info"},on:{click:e.handleOk}},[t("b-icon",{attrs:{icon:"save2",variant:"white"}}),e._v(" Enregister ")],1),t("b-button",{attrs:{size:"md",variant:"outline-secondary"},on:{click:function(e){return s()}}},[e._v(" Annuler ")])]}}],null,!0),model:{value:e.openModel,callback:function(t){e.openModel=t},expression:"openModel"}})},o=[],n=function(){var e=this,t=e._self._c;return t("div",[e.show?t("b-form",{on:{submit:e.onSubmit,reset:e.onReset}},e._l(e.buildFields(),(function(s,a){return t(s.template,{key:a,tag:"component",attrs:{field:s.field,model:s.model,"class-css":["mb-5"],"namespace-store":""},on:{addNewValue:function(t){return e.addNewValue(t,s)},removeField:function(t){return e.removeField(t,s)}}})})),1):e._e()],1)},l=[],d=(s(7658),s(6389)),c=s(8822),u=s(7203),m=s.n(u),p=function(){var e=this,t=e._self._c;return t("div",{class:e.classCss},[t("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(s){return[t("b-form-group",{attrs:{label:e.field.label,description:e.field.description}},[t("div",{staticClass:"field-item-value"},[t("b-form-input",{attrs:{placeholder:e.field.placeholder,state:e.getValidationState(s),name:e.field.name,debounce:"500"},on:{input:e.input},model:{value:e.input_value,callback:function(t){e.input_value=t},expression:"input_value"}})],1),s.errors?t("div",{staticClass:"text-danger my-2"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0):e._e()])]}}])})],1)},f=[],h=(s(6352),s(9069)),g=s(7402);(0,h.l7)("email",g.Do),(0,h.l7)("required",{...g.C1,message:"Ce champs est requis"}),(0,h.l7)("alpha",g.Fq),(0,h.l7)("alpha",g.uR);var v={name:"DrupalString",components:{ValidationProvider:h.d_},props:{classCss:{type:[Array],default:function(){return[]}},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0},namespaceStore:{type:String,required:!0}},data(){return{input_value:null}},watch:{field(){this.input_value=this.getValue()}},mounted(){this.input_value=this.getValue()},methods:{getValidationState({dirty:e,validated:t,valid:s=null}){return!e&&!t||s?null:s},getRules(){return es.getRules(this.field)},setValue(e){this.namespaceStore?this.$store.dispatch(this.namespaceStore+"/setValue",{value:e,fieldName:this.field.name}):this.$store.dispatch("setValue",{value:e,fieldName:this.field.name})},getValue(){return this.model[this.field.name]&&this.model[this.field.name][0]?this.model[this.field.name][0].value:null},input(e){const t=[];t.push({value:e}),this.setValue(t)}}},_=v,b=s(1001),y=(0,b.Z)(_,p,f,!1,null,null,null),w=y.exports,C=function(){var e=this,t=e._self._c;return t("div",{class:e.class_css},[t("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(s){return[t("b-form-group",{attrs:{label:e.field.label,description:e.field.description}},[t("div",{staticClass:"field-item-value"},[t("b-form-input",{attrs:{placeholder:e.field.placeholder,state:e.getValidationState(s),name:e.field.name+"title"},on:{input:e.input},model:{value:e.input_value.title,callback:function(t){e.$set(e.input_value,"title",t)},expression:"input_value.title"}}),t("b-form-input",{attrs:{placeholder:e.field.placeholder,state:e.getValidationState(s),name:e.field.name+"url"},on:{input:e.input},model:{value:e.input_value.uri,callback:function(t){e.$set(e.input_value,"uri",t)},expression:"input_value.uri"}})],1),s.errors?t("div",{staticClass:"text-danger my-2"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0):e._e()])]}}])})],1)},k=[],x={name:"drupal-link",props:{class_css:{type:[Array]},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0},namespaceStore:{type:String,required:!0}},components:{ValidationProvider:h.d_},data(){return{input_value:{title:"",uri:"#"},timer:null}},mounted(){this.input_value=this.getValue()},methods:{getValidationState({dirty:e,validated:t,valid:s=null}){return!e&&!t||s?null:s},getRules(){return es.getRules(this.field)},setValue(e){this.namespaceStore?this.$store.dispatch(this.namespaceStore+"/setValue",{value:e,fieldName:this.field.name}):this.$store.dispatch("setValue",{value:e,fieldName:this.field.name})},getValue(){if(this.model[this.field.name]&&this.model[this.field.name][0]){var e=this.model[this.field.name][0];return e.uri?{uri:e.uri.replace("internal:",""),title:e.title,attributes:e.attributes,options:e.options}:e}},input(){const e=[];clearTimeout(this.timer),this.timer=setTimeout((()=>{const t={uri:"internal:"+this.input_value.uri,title:this.input_value.title,attributes:[],options:[]};e.push(t),this.setValue(e)}),500)}}},E=x,S=(0,b.Z)(E,C,k,!1,null,null,null),V=S.exports,F=function(){var e=this,t=e._self._c;return t("div",{class:e.classCss},[t("b-form-group",{attrs:{label:e.field.label,description:e.field.description}},e._l(e.model[e.field.name],(function(s,a){return t("div",{key:a,staticClass:"field-item-value"},[t("b-form-input",{attrs:{placeholder:e.field.placeholder,type:"color"},model:{value:s.color,callback:function(t){e.$set(s,"color",t)},expression:"val.color"}})],1)})),0)],1)},O=[],P={name:"DrupalString",props:{classCss:{type:[Array],default:function(){return[]}},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0}}},R=P,B=(0,b.Z)(R,F,O,!1,null,null,null),A=B.exports,T=function(){var e=this,t=e._self._c;return t("div",{class:e.class_css,attrs:{field:"drupal_boolean"}},[t("div",{staticClass:"field-item-value js-form-type-radio",attrs:{format_val:e.format_val}},[t("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(s){return[t("b-form-group",{attrs:{label:e.field.label,name:e.field.name}},[t("div",{staticClass:"fieldset-wrapper"},[e.field.entity_form_settings&&e.field.entity_form_settings.list_options?t("div",{staticClass:"radio"},e._l(e.field.entity_form_settings.list_options,(function(a,i){return t("b-form-radio",{key:i,staticClass:"form-check",attrs:{name:e.field.name,value:a.value,state:e.getValidationState(s)},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("div",[a.image_url?t("b-img",{attrs:{thumbnail:"",fluid:"",src:a.image_url,alt:"Image 1"}}):e._e(),a.image_url?e._e():t("svgLoader")],1)]),t("div",{staticClass:"mt-5"},[e._v(e._s(a.label))]),a.description.value&&""!==a.description.value?t("div",{staticClass:"mt-5 text-hover",domProps:{innerHTML:e._s(a.description.value)}}):e._e()],1)})),1):e._e(),s.errors?t("div",{staticClass:"text-danger my-2"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0):e._e()])])]}}])})],1)])},$=[],q=function(){var e=this,t=e._self._c;return t("div",{staticClass:"container-svg"},[t("svg",{attrs:{version:"1.1",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[t("g",[t("defs",[t("clipPath",{attrs:{id:"clip"}},[t("path",{attrs:{d:"M 50 50 L 35 0 L 65 0 z"}})]),t("ellipse",{staticStyle:{fill:"none",stroke:"#aaa"},attrs:{id:"MyEllipse","clip-path":"url(#clip)",cx:"50",cy:"50",rx:"40",ry:"40","stroke-width":"10"}})]),t("use",{attrs:{"xlink:href":"#MyEllipse"}}),t("use",{attrs:{"xlink:href":"#MyEllipse",transform:"rotate(40 50 50)"}}),t("use",{attrs:{"xlink:href":"#MyEllipse",transform:"rotate(80 50 50)"}}),t("use",{attrs:{"xlink:href":"#MyEllipse",transform:"rotate(120 50 50)"}}),t("use",{attrs:{"xlink:href":"#MyEllipse",transform:"rotate(160 50 50)"}}),t("use",{attrs:{"xlink:href":"#MyEllipse",transform:"rotate(200 50 50)"}}),t("use",{attrs:{"xlink:href":"#MyEllipse",transform:"rotate(240 50 50)"}}),t("use",{attrs:{"xlink:href":"#MyEllipse",transform:"rotate(280 50 50)"}}),t("use",{attrs:{"xlink:href":"#MyEllipse",transform:"rotate(320 50 50)"}}),t("ellipse",{staticStyle:{fill:"none",stroke:"black"},attrs:{"clip-path":"url(#clip)",cx:"50",cy:"50",rx:"40",ry:"40","stroke-width":"12"}},[t("animateTransform",{attrs:{attributeName:"transform",attributeType:"XML",type:"rotate",values:"0 50 50; 40 50 50; 80 50 50; 120 50 50;\n        160 50 50; 200 50 50; 240 50 50; 280 50 50; 320 50 50; 360 50 50",dur:"2s",repeatCount:"indefinite",additive:"replace",calcMode:"linear",fill:"freeze"}})],1)])])])},N=[],L={},j=(0,b.Z)(L,q,N,!1,null,"d69890ba",null),I=j.exports,M={name:"DrupalBoolean",components:{ValidationProvider:h.d_,svgLoader:I},props:{class_css:{type:[Array]},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0},namespaceStore:{type:String,required:!0}},data(){return{selected:this.model[this.field.name]&&this.model[this.field.name][0]?this.model[this.field.name][0].value:null}},computed:{format_val(){const e=[];return null!==this.selected&&e.push({value:this.selected}),this.setValue(e),e},fieldName(){return this.field.name}},watch:{fieldName(){this.getImage()}},mounted(){this.getImage(),console.log("load image boolean")},methods:{getImage(){this.field.entity_form_settings&&this.field.entity_form_settings.list_options&&this.field.entity_form_settings.list_options.forEach((e=>{e.image_url||this.$set(e,"image_url",""),e.image[0]&&""==e.image_url&&es.getImageUrl(e.image[0]).then((t=>{e.image_url=t.data}))}))},setValue(e){this.namespaceStore?this.$store.dispatch(this.namespaceStore+"/setValue",{value:e,fieldName:this.field.name}):this.$store.dispatch("setValue",{value:e,fieldName:this.field.name})},getValidationState({dirty:e,validated:t,valid:s=null}){return!e&&!t||s?null:s},getRules(){return es.getRules(this.field)}}},U=M,D=(0,b.Z)(U,T,$,!1,null,"e2fd8bd0",null),Z=D.exports,H=function(){var e=this,t=e._self._c;return t("div",{class:e.class_css},[t("div",{staticClass:"field-item-value js-form-type-checkbox"},[t("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(s){return[t("b-form-group",{attrs:{label:e.field.label}},[t("div",{staticClass:"fieldset-wrapper"},[t("div",{staticClass:"checkbox"},[t("b-form-checkbox-group",{on:{input:e.setValue},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}},e._l(e.field.entity_form_settings.list_options,(function(s,a){return t("b-form-checkbox",{key:a,staticClass:"form-check",attrs:{value:s.value}},[t("transition",{attrs:{name:"fade",mode:"out-in"}},[t("div",[s.image_url?t("b-img",{attrs:{thumbnail:"",fluid:"",src:s.image_url,alt:"Image 1"}}):e._e(),s.image_url?e._e():t("svgLoader")],1)]),t("div",{staticClass:"mt-5"},[e._v(e._s(s.label))]),s.description.value&&""!==s.description.value?t("div",{staticClass:"mt-5 text-hover",domProps:{innerHTML:e._s(s.description.value)}}):e._e()],1)})),1)],1),s.errors?t("div",{staticClass:"text-danger my-2"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0):e._e()])])]}}])})],1)])},W=[],z={name:"DrupalListString",components:{ValidationProvider:h.d_,svgLoader:I},props:{class_css:{type:[Array]},field:{type:Object,required:!0},model:{type:[Object],required:!0},namespaceStore:{type:String,required:!0}},data(){return{selected:[]}},mounted(){this.getValue(),this.getImage()},methods:{getImage(){this.field.entity_form_settings.list_options.forEach((e=>{e.image_url||this.$set(e,"image_url",""),e.image&&e.image[0]&&""==e.image_url&&es.getImageUrl(e.image[0]).then((t=>{e.image_url=t.data}))}))},setValue(e){const t=[];e.forEach((e=>{t.push({value:e})})),this.namespaceStore?this.$store.dispatch(this.namespaceStore+"/setValue",{value:t,fieldName:this.field.name}):this.$store.dispatch("setValue",{value:t,fieldName:this.field.name})},getRules(){return es.getRules(this.field)},getValue(){this.model[this.field.name]&&this.model[this.field.name].length&&this.model[this.field.name].forEach((e=>{this.selected.push(e.value)}))}}},G=z,J=(0,b.Z)(G,H,W,!1,null,"776a4b88",null),Y=J.exports,X=function(){var e=this,t=e._self._c;return t("div",{staticClass:"mb-4",class:e.classCss},[t("ValidationProvider",{staticClass:"form-group",attrs:{name:e.field.label,rules:{required:!0}},scopedSlots:e._u([{key:"default",fn:function(s){return[t("legend",{domProps:{innerHTML:e._s(e.field.label)}}),t("ckeditor",{attrs:{config:e.editorConfig},on:{input:e.input,namespaceloaded:e.onNamespaceLoaded},model:{value:e.editorData,callback:function(t){e.editorData=t},expression:"editorData"}}),s.errors?t("div",{staticClass:"text-danger my-2"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0):e._e()]}}])})],1)},K=[],Q={name:"TextareaCkeditor",components:{ValidationProvider:h.d_},props:{classCss:{type:[Array],default:function(){return[]}},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0},namespaceStore:{type:String,required:!0}},data(){return{editorData:"",preEditorConfig:{codeSnippet_theme:"monokai_sublime",stylesSet:[],toolbar:[{name:"document",items:["Bold","Italic","-","Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]}],contentsCss:"@import '"+es.config.getBaseUrl()+"/themes/contrib/wb_universe/node_modules/%40fortawesome/fontawesome-free/css/all.min.css'; @import 'http://wb-horizon.com/themes/custom/wb_horizon_com/css/vendor-style.css';",on:{instanceReady:function(e){e.sender.dataProcessor.writer.setRules("p",{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!1,breakBeforeClose:!0,breakAfterClose:!0}),e.sender.dataProcessor.writer.setRules("img",{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h1",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h2",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h3",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h4",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h5",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h6",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("div",{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!0,breakBeforeClose:!0,breakAfterClose:!1})}}}}},computed:{editorConfig(){var e="codesnippet,print,format,font,colorbutton,justify,image,filebrowser,stylesheetparser";return{extraPlugins:e,...this.preEditorConfig}}},mounted(){this.editorData=this.getValue()},methods:{getValidationState({dirty:e,validated:t,valid:s=null}){return!e&&!t||s?null:s},getRules(){return es.getRules(this.field)},setValue(e){this.namespaceStore?this.$store.dispatch(this.namespaceStore+"/setValue",{value:e,fieldName:this.field.name}):this.$store.dispatch("setValue",{value:e,fieldName:this.field.name})},getValue(){if(this.model[this.field.name]&&this.model[this.field.name][0])return this.model[this.field.name][0].value},input(e){const t=[];t.push({value:e,format:"full_html"}),this.setValue(t)},onNamespaceLoaded(e){e.config.allowedContent=!0,e.config.htmlEncodeOutput=!1,e.config.entities=!1,e.dtd.$removeEmpty.span=0,e.dtd.$removeEmpty.i=0,e.dtd.$removeEmpty.label=0}}},ee=Q,te=(0,b.Z)(ee,X,K,!1,null,null,null),se=te.exports,ae=function(){var e=this,t=e._self._c;return t("div",{class:e.class_css},[t("div",{domProps:{innerHTML:e._s(e.field.content)}})])},ie=[],re={props:{class_css:{type:[Array]},field:{type:Object,required:!0}}},oe=re,ne=(0,b.Z)(oe,ae,ie,!1,null,null,null),le=ne.exports,de=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vuejs-uploader",class:e.classCss},[t("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(s){return[t("b-form-group",{attrs:{label:e.field.label,description:e.field.description}},[t("b-form-file",{attrs:{placeholder:"Ajouter un fichier ...","drop-placeholder":"Drop file here...",multiple:e.cardinality,accept:".jpg, .png, .gif, webp",size:"sm",state:e.getValidationState(s)},on:{input:e.previewImage},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}})],1)]}}])}),t("div",{staticClass:"previews"},e._l(e.toUplode,(function(e,s){return t("div",{key:s},[t("b-img",{staticClass:"img-preview",attrs:{src:e.url,fluid:"",alt:"Fluid image",thumbnail:""}})],1)})),0)],1)},ce=[],ue={name:"UploaderFile",components:{ValidationProvider:h.d_},props:{classCss:{type:[Array],default:function(){return[]}},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0},namespaceStore:{type:String,required:!0}},data(){return{files:[],urls:[],toUplode:[]}},computed:{cardinality(){return-1===this.field.cardinality}},mounted(){this.getValue()},methods:{getValidationState({dirty:e,validated:t,valid:s=null}){return!e&&!t||s?null:s},getRules(){return es.getRules(this.field)},previewImage(e){var t=new FileReader;if(this.cardinality)for(const s in e){const a=e[s];es.config.postFile("/filesmanager/post",a).then((e=>{t.onload=t=>{this.toUplode.push({file:a,status:e,error:0,url:t.target.result})},t.readAsDataURL(a)}))}else{const s=[];this.toUplode=[],es.config.postFile("/filesmanager/post",e).then((a=>{this.namespaceStore?this.$store.commit(this.namespaceStore+"/ACTIVE_RUNNING"):this.$store.commit("ACTIVE_RUNNING"),t.onload=t=>{this.toUplode.push({file:e,status:a,error:0,url:t.target.result}),setTimeout((()=>{this.namespaceStore?this.$store.commit(this.namespaceStore+"/DISABLE_RUNNING"):this.$store.commit("DISABLE_RUNNING")}),300)},t.readAsDataURL(e),s.push({target_id:a.id}),this.setValue(s)}))}},setValue(e){this.namespaceStore?this.$store.dispatch(this.namespaceStore+"/setValue",{value:e,fieldName:this.field.name}):this.$store.dispatch("setValue",{value:e,fieldName:this.field.name})},getValue(){this.model[this.field.name]&&this.model[this.field.name].length&&(this.toUplode=[],this.model[this.field.name].forEach((e=>{es.config&&es.getImageUrl(e.target_id).then((e=>{this.toUplode.push({url:e.data})}))})))}}},me=ue,pe=(0,b.Z)(me,de,ce,!1,null,null,null),fe=pe.exports,he=function(){var e=this,t=e._self._c;return t("div",{staticClass:"complexe_field",class:e.classCss},[t("h4",{directives:[{name:"show",rawName:"v-show",value:!e.showFormEdit,expression:"!showFormEdit"}],staticClass:"font-weight-bold"},[e._v(e._s(e.field.label))]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showFormEdit,expression:"!showFormEdit"}],staticClass:"pb-3 field-mutiple",attrs:{id:e.idHtml}},e._l(e.model[e.field.name],(function(s,a){return t("div",{key:a,staticClass:"field-item-value mb-4"},[t("div",{staticClass:"bg-light p-4 px-5"},[t("div",{staticClass:"d-flex justify-content-between align-items-center"},[t("div",{staticClass:"text"},[t("div",{staticClass:"font-weight-bold"},[e._v(e._s(s.value))]),t("div",{staticClass:"d-flex"},[t("span",[e._v(e._s(s.company))]),e._v(" "),t("span",[e._v(e._s(s.date_debut))])])]),t("div",{staticClass:"icon-buttons"},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn-action mr-5",attrs:{variant:"light",title:"Editer"},on:{click:function(t){return e.Edit(s)}}},[t("b-icon",{attrs:{icon:"pencil-fill",variant:"secondary","font-scale":"1"}})],1),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn-action btn-drag-drop mr-5",attrs:{variant:"light",title:"Glisser-déposer"}},[t("b-icon",{attrs:{icon:"arrows-move",variant:"secondary","font-scale":"1"}})],1),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn-action mr-4",attrs:{variant:"light",title:"Supprimer"},on:{click:function(t){return e.removeField(a)}}},[t("b-icon",{attrs:{icon:"trash-fill",variant:"secondary","font-scale":"1"}})],1)])])])])})),0),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showFormEdit,expression:"!showFormEdit"}],staticClass:"add-new-card",on:{click:e.add}},[t("div",{staticClass:"anc-content d-flex align-items-center"},[t("b-icon",{staticClass:"text-info",attrs:{icon:"plus-circle-fill","font-scale":"1.5"}}),t("h4",{staticClass:"anc-titre"},[e._v(e._s(e.addButtonTitle))])],1)]),e.showFormEdit?t("EditExperienceType",{attrs:{"f-value":e.currentEditValue,field:e.field},on:{closeEditForm:e.closeEditForm}}):e._e()],1)},ge=[],ve=s(9776),_e=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"p-3 py-5",on:{click:function(t){return e.$emit("closeEditForm")}}},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn-action btn-back",attrs:{variant:"light",title:"Back"}},[t("b-icon",{attrs:{icon:"arrow-left",variant:"secondary","font-scale":"1"}}),e._v(" Retour ")],1)]),t("div",{staticClass:"add-item-form"},[t("b-form",[t("b-row",{staticClass:""},[t("b-col",{attrs:{md:"6"}},[t("div",{staticClass:"fi-input"},[t("label",{attrs:{for:"input-titre"}},[e._v(e._s(e.settings.label_value))]),t("b-form-input",{attrs:{id:"input-titre",type:"text",placeholder:"Titre",required:""},model:{value:e.form.value,callback:function(t){e.$set(e.form,"value",t)},expression:"form.value"}}),t("b-form-text",[e._v(" p.ex. Vendeur de cercueil ")])],1)]),t("b-col",{attrs:{md:"6"}},[t("div",{staticClass:"fi-input"},[t("label",{attrs:{for:"input-compaign"}},[e._v(e._s(e.settings.label_company))]),t("b-form-input",{attrs:{id:"input-compaign",type:"text",placeholder:"la compagnie",required:""},model:{value:e.form.company,callback:function(t){e.$set(e.form,"company",t)},expression:"form.company"}}),t("b-form-text",[e._v(" p.ex. Luis Vuitton")])],1)]),t("b-col",{attrs:{cols:"12"}},[t("div",{staticClass:"fi-input"},[t("label",{attrs:{for:"input-location"}},[e._v(e._s(e.settings.label_address))]),t("b-form-input",{attrs:{id:"input-location",type:"text",placeholder:"Tokyo, Lagos",required:""},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}}),t("b-form-text",[e._v(" p.ex. Lagos ")])],1)])],1),t("b-row",{staticClass:""},[t("b-col",{attrs:{md:"6"}},[t("div",{staticClass:"fi-input"},[t("label",{attrs:{for:"input-date-debut"}},[e._v(" "+e._s(e.settings.label_date_debut)+" ")]),t("b-form-datepicker",{attrs:{id:"input-date-debut",type:"text",placeholder:"Date de début",required:"",locale:"fr","date-format-options":{year:"numeric",month:"short",day:"2-digit"}},model:{value:e.date_debut,callback:function(t){e.date_debut=t},expression:"date_debut"}}),t("b-form-text",[e._v(" p.ex. 22 Juin")])],1)]),t("b-col",{attrs:{md:"6"}},[t("div",{staticClass:"fi-input"},[t("label",{attrs:{for:"input-date-fin"}},[e._v(" "+e._s(e.settings.label_date_fin)+" ")]),t("b-form-datepicker",{attrs:{id:"input-date-fin",type:"text",placeholder:"Date de fin",required:"",locale:"fr","date-format-options":{year:"numeric",month:"short",day:"2-digit"}},model:{value:e.date_fin,callback:function(t){e.date_fin=t},expression:"date_fin"}}),t("b-form-text",[e._v(" p.ex. 22 Dec ")]),t("b-form-checkbox",{staticClass:"mt-3 ml-2",attrs:{required:""},model:{value:e.form.en_poste,callback:function(t){e.$set(e.form,"en_poste",t)},expression:"form.en_poste"}},[e._v(" "+e._s(e.settings.label_en_poste)+" ")])],1)])],1),t("b-row",{staticClass:""},[t("b-col",[t("div",{staticClass:"fi-input fi-input--textarea"},[t("label",{staticClass:"label-respon",attrs:{for:"input-textarea-role"}},[e._v(" "+e._s(e.settings.label_description)+" ")]),t("ckeditor",{attrs:{config:e.editorConfig},on:{input:e.input,namespaceloaded:e.onNamespaceLoaded},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}}),t("b-form-text",[e._v(" p.ex. Organisation d'événements VIP et prise en charge de clients exclusifs. ")])],1)])],1)],1)],1)])},be=[];class ye{constructor(e){this.name=e}getValue(){return this.name}}var we={name:"FormInput",components:{},props:{fValue:{type:Object,require:!0,default:function(){return{}}},field:{type:Object,require:!0,default:function(){return{}}}},data(){return{form:{},editorData:"",preEditorConfig:{codeSnippet_theme:"monokai_sublime",stylesSet:[],toolbar:[{name:"document",items:["Bold","Italic","-","Cut","Copy","Paste","PasteText","PasteFromWord","-","Undo","Redo"]}],contentsCss:"@import '"+es.config.getBaseUrl()+"/themes/contrib/wb_universe/node_modules/%40fortawesome/fontawesome-free/css/all.min.css'; @import 'http://wb-horizon.com/themes/custom/wb_horizon_com/css/vendor-style.css';",on:{instanceReady:function(e){e.sender.dataProcessor.writer.setRules("p",{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!1,breakBeforeClose:!0,breakAfterClose:!0}),e.sender.dataProcessor.writer.setRules("img",{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h1",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h2",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h3",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h4",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h5",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("h6",{indent:!0,breakBeforeOpen:!1,breakAfterOpen:!1,breakBeforeClose:!1,breakAfterClose:!1}),e.sender.dataProcessor.writer.setRules("div",{indent:!0,breakBeforeOpen:!0,breakAfterOpen:!0,breakBeforeClose:!0,breakAfterClose:!1})}}}}},computed:{settings(){return this.field.entity_form?this.field.entity_form.settings:{}},editorConfig(){var e="codesnippet,print,format,font,colorbutton,justify,image,filebrowser,stylesheetparser";return{extraPlugins:e,...this.preEditorConfig}},date_debut:{get(){if(this.form.date_debut){const e=new Date(1e3*this.form.date_debut);let t=parseInt(e.getMonth())+1;return e.getFullYear()+"-"+t+"-"+e.getDate()}return""},set(e){if(e){const t=new Date(e);this.form.date_debut=Math.floor(t.getTime()/1e3)}}},date_fin:{get(){if(this.form.date_fin){const e=new Date(1e3*this.form.date_fin);let t=parseInt(e.getMonth())+1;return e.getFullYear()+"-"+t+"-"+e.getDate()}return""},set(e){if(console.log(" date_fin : ",e),e){const t=new Date(e);this.form.date_fin=Math.floor(t.getTime()/1e3)}}}},mounted(){const e=new ye(this.fValue);this.form=e.getValue()},methods:{input(e){this.form.description=e},onNamespaceLoaded(e){e.config.allowedContent=!0,e.config.htmlEncodeOutput=!1,e.config.entities=!1,e.dtd.$removeEmpty.span=0,e.dtd.$removeEmpty.i=0,e.dtd.$removeEmpty.label=0}}},Ce=we,ke=(0,b.Z)(Ce,_e,be,!1,null,null,null),xe=ke.exports;const Ee=()=>({value:"Developpeur web",company:"Nutibe",address:"",date_debut:"",date_fin:"",description:"s",format:null});var Se={name:"ExperienceType",components:{EditExperienceType:xe},props:{classCss:{type:[Array],default:function(){return[]}},addButtonTitle:{type:String,default:"Ajouter"},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0}},data(){return{idHtml:"sort-"+Math.random().toString(36),currentEditValue:{},showFormEdit:!1}},mounted(){var e=document.getElementById(this.idHtml);ve.ZP.create(e,{animation:150,handle:".btn-drag-drop",ghostClass:"blue-background-class"})},methods:{input(e){const t=[];t.push({value:e})},add(){this.$emit("addNewValue",Ee())},removeField(e){console.log("removeField in fields : ",e),this.$emit("removeField",e)},Edit(e){this.currentEditValue=e,this.showFormEdit=!0},closeEditForm(){this.showFormEdit=!1}}},Ve=Se,Fe=(0,b.Z)(Ve,he,ge,!1,null,"087ccdc9",null),Oe=Fe.exports,Pe=s(8001),Re=s.n(Pe),Be=function(){var e=this,t=e._self._c;return t("div",{class:e.classCss},[t("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(s){return[t("b-form-group",{attrs:{label:e.field.label,description:e.field.description}},[t("div",{staticClass:"autocomplete"},[t("multiselect",{attrs:{options:e.options,"custom-label":e.nameWithLang,placeholder:"",label:"text","track-by":"text","show-no-results":!1,showLabels:!1,loading:e.isLoading},on:{"search-change":e.asyncFind,select:e.selectUser},model:{value:e.model.value,callback:function(t){e.$set(e.model,"value",t)},expression:"model.value"}},[t("template",{slot:"noResult"},[t("span",{staticClass:"option__titl d-none"},[e._v(" Aucun contenu ")])]),t("template",{slot:"placeholder"},[t("span",{staticClass:"option__title"},[e._v(" Le terme n'existe pas ")])]),t("template",{slot:"noOptions"},[t("span",{staticClass:"option__title"},[e._v(" Saisir un terme ")])])],2),t("div",{staticClass:"text-danger"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0)],1)])]}}])})],1)},Ae=[],Te=s(8309),$e=s.n(Te),qe=s(8609);const Ne={...qe.EC,getRandomIntInclusive(e=99,t=999){return e=Math.ceil(e),t=Math.floor(t),Math.floor(Math.random()*(t-e+1))+e}};var Le=Ne,je={...Le,url_session:"/session/token",token:null,getToken(){return new Promise((e=>{this.token&&e(this.token),this.get(this.url_session).then((t=>{this.token=t.data,e(t.data)}))}))}};const Ie={...je,...Le,async dPost(e,t,s=null){const a=await this.getToken();var i={"X-CSRF-Token":a,"Content-Type":"application/json"};return s&&(i=this.mergeHeaders(s,i)),this.post(e,t,{headers:i})},async dGet(e,t=null){const s=await this.getToken();var a={"X-CSRF-Token":s,"Content-Type":"application/json"};return t&&(a=this.mergeHeaders(t,a)),this.get(e,{headers:a})},mergeHeaders(e,t){if(e)for(const s in e)t[s]=e[s];return t}};var Me=Ie,Ue={baseURl:"/jsonapi",headers:{Accept:"application/vnd.api+json","Content-Type":"application/vnd.api+json"}};class De{constructor(e=""){this.query=e}addFilter(e,t,s){var a="fil-"+Le.getRandomIntInclusive();return this.addParam(a,"path",e),this.addParam(a,"operator",t),this.addParam(a,"value",s),this.query}addParam(e,t,s){this.query&&""!==this.query&&(this.query+="&"),this.query+=`filter[${e}][condition][${t}]=${s}`}}var Ze=De;class He{constructor(e){this.vid=e,this.url=Ue.baseURl+"/taxonomy_term/"+this.vid,this.terms=[]}get(){return new Promise((e=>{Me.get(this.url,Ue.headers).then((t=>{this.terms=t.data,e(t.data)}))}))}getSearch(e){const t=new Ze;return t.addFilter("name","CONTAINS",e),new Promise((e=>{Me.get(this.url+"?"+t.query,Ue.headers).then((t=>{this.terms=t.data,e(t.data)}))}))}getValue(e){const t=new Ze;return t.addFilter("name","=",e),new Promise((e=>{Me.get(this.url+"?"+t.query,Ue.headers).then((t=>{this.terms=t.data,e(t.data)}))}))}getValueByTid(e){const t=new Ze;return t.addFilter("tid","=",e),new Promise(((e,s)=>{Me.get(this.url+"?"+t.query,Ue.headers).then((t=>{this.terms=t.data,e(t.data)})).catch((e=>{s(e)}))}))}getValueById(e){const t=new Ze;return t.addFilter("id","=",e),new Promise((e=>{Me.get(this.url+"?"+t.query,Ue.headers).then((t=>{this.terms=t.data,e(t.data)}))}))}getOptions(){const e=[];for(const t in this.terms.data){const s=this.terms.data[t];e.push({text:s.attributes.name,value:s.attributes.drupal_internal__tid})}return e}}var We=He;s(2801);const ze="drupal-vuejs-credential",Ge="drupal-vuejs-cre-val";var Je={...qe.EC,login(e){return new Promise(((t,s)=>{if(!e.name||!e.pass)throw"Format de connexion non valide";this.post("/user/login?_format=json",e).then((s=>{this.saveTempCredential(e,s.data),t(s)})).catch((e=>s(e)))}))},saveTempCredential(e,t){localStorage.setItem(ze,JSON.stringify(e)),localStorage.setItem(Ge,JSON.stringify(t))},loadCredential(){const e=localStorage.getItem(ze);if(e)return JSON.parse(e)},deleteConnexion(){localStorage.removeItem(ze)},checkCurrentUserIsLogin(){const e=localStorage.getItem(Ge),t=localStorage.getItem(ze);if(e&&t)return JSON.parse(e)}},Ye={stringLength:19,snakeCase(e){return e.replace(/\W+/g," ").split(/ |\B(?=[A-Z])/).map((e=>e.toLowerCase())).join("_")},generateIdEntityType(e){let t=this.snakeCase(e).substring(0,this.stringLength);const s=new Date;return t+="_",t+=s.getFullYear(),t+="_",t+=s.getMonth(),t+="_",t+=Math.floor(999*Math.random()),t}},Xe=function(e,t){var s=e+":"+t,a=btoa(s);return"Basic "+a},Ke=(qe.Ht,{modelsFields:{},string(e,t,s=[]){0===s.length&&s.push({value:""});const a=[];a.push(e("label",{class:["d-block","content-center__title"]},[t.label_value])),s.forEach((t=>{a.push(e("input",{props:{type:"text",value:t.value,b_input:{type:Object,required:!0}},on:{input:function(e){e.target&&e.target.value&&(t.value=e.target.value)}},class:["form-control"]}))})),a.push(e("small",{class:["text-muted"]},[t.description]));const i=e("div",{props:{},class:["form-group","content-center__input"]},a);return i}});class Qe{constructor(e,t){this.entity=e,this.bundle=t}async format(){var e=await this.getFields();return new Promise(((t,s)=>{if(e.data&&e.data.fields){Ke.modelsFields=this.buildModel(e.data.fields);const s=[];for(const t in e.data.fields)s.push({ref:t,props:{name:{type:String,default:e.data.fields[t].name}},render(s){var a=[];switch(e.data.fields[t].type){case"string":a.push(Ke.string(s,e.data.fields[t],Ke.modelsFields[t]));break}return s("div",a)}});t({templates:s,models:Ke.modelsFields})}else s("Aucune donnée disponible")}))}getFields(){var e="/api/form-node/generate-form";return"user"===this.entity&&(e="/api/form-node/generate-user"),e+="/"+this.bundle,Me.get(e)}buildModel(e){const t={};for(const s in e)e[s].type&&(t[s]=[]);return t}}var et=Qe,tt={user:{},FB:null,appId:"",scope:"public_profile, email",version:"v11.0",openPopup(){var e=this;window.FB.login((e=>{this.statusChangeCallback(e,!0)}),{scope:e.scope,return_scopes:!0})},logOut(){window.FB.logout((function(e){this.onLogOut(e)}))},onLogOut(e){console.log("Déconnetion réussi",e)},statusChangeCallback(e,t=!1){if(this.user=e,t){var s=new CustomEvent("wbu-fb-status-change");document.dispatchEvent(s)}console.log("status",this.user)},getUserStatus(){var e=this;window.FB.getLoginStatus((function(t){e.statusChangeCallback(t)}))},chargement(){var e=this,t=document.getElementsByTagName("head")[0],s=document.createElement("script");t.appendChild(s),s.id="facebook-jssdk-021",s.onload=function(){function t(){window.FB?(e.FB=window.FB,e.FB.init({appId:e.appId,cookie:!0,xfbml:!0,version:e.version,statue:!1}),console.log("Chargement du JS facebook"),e.getUserStatus()):(console.log("facebook not load"),setTimeout((()=>{t()}),900))}t()},s.src="https://connect.facebook.net/en_US/sdk.js"}},st=function(){var e=this,t=e._self._c;return t("div",{staticClass:"buttton-google-aouth",class:e.classRender,attrs:{id:e.idHtmlrender}})},at=[],it={userAccess:{},client_id:"513247959752-qapd9jb30pdtoh51m0h53070a2v8c4er.apps.googleusercontent.com"},rt={AfterRedirect(e,t=null,s=null){console.log("AfterRedirect action .",e);var a=null;if("redirect"==e&&t);else if("home"==e)window.location.assign("/");else if("reload"==e)window.location.reload(),console.log("reload this page");else if("emit_even"==e){var i=new CustomEvent("login_rx_vuejs__user_is_login");document.dispatchEvent(i)}else"default"==e&&(s.reponse&&s.reponse.config.url!==s.reponse.request.responseURL?window.location.assign(s.reponse.request.responseURL):s.data&&s.data.createuser?a="final-gl-register":s.data&&window.location.reload());return a}};function ot(e){return new Promise((t=>{var s=document.createElement("script");s.setAttribute("src",e),s.onload=function(){console.log(" Chargement du script ok : ",e),t(!0)},document.head.appendChild(s)}))}var nt={name:"logingoogle",props:{idHtml:{type:String,required:!0},returnUidInfo:{type:Boolean,default:!1},classRender:{type:Array,default:function(){return["mx-auto"]}},action_after_login:{type:String,default:"default"}},mounted(){window.google?this.getUserInfoFromFrame():ot("https://accounts.google.com/gsi/client").then((()=>{this.getUserInfoFromFrame()}))},computed:{idHtmlrender(){return"google-login-tab"+this.idHtml}},methods:{getUserInfoFromFrame(){var e=this;function t(t){console.log("Encoded JWT ID token: ",t),it.userAccess={...t,client_id:t.clientId},e.TryToLoginWithGoogle(),window.rxGoogle=it}console.log(" window.onload ! ",window.onload);const s=()=>{window.google.accounts.id.initialize({client_id:it.client_id,callback:t}),window.google.accounts.id.renderButton(document.getElementById(e.idHtmlrender),{theme:"outline",size:"large"}),window.google.accounts.id.prompt()};s()},TryToLoginWithGoogle(){return new Promise(((e,t)=>{Me.post("/login-rx-vuejs/google-check",it.userAccess).then((t=>{this.isBusy=!1,this.alertDisplay=!0,this.alertType="alert-success",this.alertText="Connexion réussie",this.$emit("ev_logingoogle",t.data),this.returnUidInfo||rt.AfterRedirect(this.action_after_login,null,t),e(t)})).catch((e=>{this.isBusy=!1,this.alertDisplay=!0,this.alertType="alert-danger",this.alertText="Google : Erreur de connexion",e.error&&e.error.statusText&&""!=e.error.statusText&&(this.alertText=e.error.statusText),console.log(" Error ajax ",e.error),console.log(" Error ajax ",e.code),console.log(" Error ajax ",e.stack),t(e)}))}))}}},lt=nt,dt=(0,b.Z)(lt,st,at,!1,null,null,null),ct=dt.exports,ut=function(){var e=this,t=e._self._c;return t("ValidationObserver",{ref:"formValidate",attrs:{tag:"form"}},[t("div",{staticClass:"login-page"},[e.alertDisplay?t("div",{staticClass:"alert w-100",class:e.alertType,attrs:{role:"alert"},domProps:{innerHTML:e._s(e.alertText)}}):e._e(),e.isBusy?t("div",{staticClass:"spinner-grow text-primary",staticStyle:{width:"3rem",height:"3rem"},attrs:{role:"status"}},[t("span",{staticClass:"sr-only"},[e._v("Chargement ...")])]):e._e(),t("transition",{attrs:{name:"customslide"}},[t("div",{staticClass:"block-center"},[t(e.stepe,{tag:"component",attrs:{urlLogo:e.urlLogo,form:e.form,formValidate:e.formValidate,action_after_login:e.action_after_login,model_register_form:e.model_register_form},on:{"select-stepe":e.selectStepe}})],1)])],1),t("div",{staticClass:"politik-secur mx-auto text-center"},[e._t("condition_utilisation",(function(){return[t("p",{staticClass:"text-white"},[e._v(" En vous inscrivant, vous acceptez nos "),t("a",{attrs:{href:"#"}},[e._v(" Conditions d'utilisation ")]),e._v(", de recevoir des emails et des MAJ de LESROISDELARENO et vous reconnaissez avoir lu notre "),t("a",{attrs:{href:"#"}},[e._v(" Politique de confidentialité")])])]}))],2)])},mt=[];const pt=new(m());var ft={...rt,messages:{log_email:"Email ou Nom d'utilisateur",pass:"Mot de passe",login:"Nom d'utilisateur",mail:"Email",submit:{first:"Suivant",connect:"Connexion",register:"S'inscrire",final:"terminée"},devisCreateUser:"Votre compte a été creer sur <a href='/'> lesroisdelareno.fr </a>. <br> <strong> Bien vouloir verifier votre boite mail afin de valider votre compte </strong>"},modalSuccess(e,t){return qe.Ht.modalSuccess(e,t)},msgCreate(e){var t=pt.$createElement;const s=[];for(const a in e)s.push(t("p",{domProps:{innerHTML:e[a]},style:{lineHeight:"25px",fontSize:"17px",padding:"15px 15px 0px",margin:0}},[]));return t("div",{},[s])}},ht=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-center"},[t("a",{staticClass:"content-center__img",attrs:{href:"/"}},[t("img",{staticClass:"img-fluid",attrs:{src:e.urlLogo,alt:""}})]),t("h4",{staticClass:"title"},[e._v("Connectez vous avec")]),t("div",{staticClass:"content-center__btn-column"},[t("logingoogle",{attrs:{idHtml:"default"}}),t("div",{staticClass:"btn-login btn-login--facebook",on:{click:e.loginFacebook}},[t("span",{staticClass:"btn-login__icon icon-facebook"}),t("i",{staticClass:"btn-login__text"},[e._v(" Facebook ")]),"facebook"===e.waiting?t("svgWaiting"):e._e()],1)],1),t("strong",{staticClass:"d-block"},[e._v(" Ou ")]),t("hr",{staticClass:"diviseur"}),t("h3",{staticClass:"content-center__title"},[e._v(e._s(e.messages.log_email))]),t("div",{staticClass:"form-group content-center__input"},[t("ValidationProvider",{attrs:{name:"name",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name[0].value,expression:"form.name[0].value"}],staticClass:"form-control",attrs:{type:"text",name:"name"},domProps:{value:e.form.name[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.name[0],"value",t.target.value)}}}),t("div",{staticClass:"text-danger text-small"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0)]}}])})],1),t("div",{staticClass:"content-center__btn"},[t("div",{staticClass:"btn-login btn-login--connexion",on:{click:e.checkUserStatus}},[t("span",{staticClass:"btn-login__text"},[e._v(" "+e._s(e.messages.submit.first)+" ")]),"wait"===e.waiting?t("svgWaiting"):e._e()],1)])])},gt=[],vt={name:"checkstatus",props:{urlLogo:{type:String,required:!0},form:{type:Object,required:!0},formValidate:{type:Object,required:!0}},components:{svgWaiting:()=>s.e(487).then(s.bind(s,7487)),logingoogle:ct},data(){return{messages:ft.messages,waiting:""}},methods:{loginFacebook(){this.waiting="facebook",tt.openPopup()},logOutFacebook(){tt.logOut()},async checkUserStatus(){this.waiting="wait";var e="/login-rx-vuejs/check-user-status";const t=await this.formValidate.validate();t?Me.post(e,this.form).then((e=>{this.waiting="",e.data?this.$emit("select-stepe","setPassword"):this.$emit("select-stepe","register")})):this.waiting=""}}},_t=vt,bt=(0,b.Z)(_t,ht,gt,!1,null,null,null),yt=bt.exports,wt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-center"},[t("a",{staticClass:"content-center__img",attrs:{href:"/"}},[t("img",{attrs:{src:e.urlLogo,alt:""}})]),t("h3",{staticClass:"content-center__title"},[e._v(e._s(e.messages.pass))]),t("div",{staticClass:"form-group content-center__input"},[t("ValidationProvider",{ref:"refPass",attrs:{name:"pass",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(s){return[e.form.password?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password[0].value,expression:"form.password[0].value"}],staticClass:"form-control",attrs:{type:"password",name:"pass"},domProps:{value:e.form.password[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.password[0],"value",t.target.value)}}}):e._e(),t("div",{staticClass:"text-danger text-small"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0)]}}])})],1),t("a",{staticClass:"content-center__forgot-pass",attrs:{href:"/user/password"}},[e._v(" Mot de passe oublié ? ")]),t("div",{staticClass:"content-center__btn"},[t("div",{staticClass:"btn-login btn-login--connexion",on:{click:e.Login}},[t("span",{staticClass:"btn-login__text"},[e._v(" "+e._s(e.messages.submit.connect)+" ")]),"wait"==e.waiting?t("svgWaiting"):e._e()],1)]),t("hr"),t("a",{staticClass:"text-center d-block",attrs:{href:"#"},on:{click:function(t){return e.$emit("select-stepe","checkstatus")}}},[e._v(" Retour ")])])},Ct=[],kt={name:"checkstatus",props:{urlLogo:{type:String,required:!0},form:{type:Object,required:!0},formValidate:{type:Object,required:!0},action_after_login:{type:String,required:!0}},components:{svgWaiting:()=>s.e(487).then(s.bind(s,7487))},data(){return{messages:ft.messages,waiting:""}},mounted(){void 0===this.form.password&&this.$set(this.form,"password",[{value:""}])},methods:{async Login(){this.waiting="wait";var e="/login-rx-vuejs/user-connexion";const t=await this.formValidate.validate();setTimeout((()=>{t?Me.post(e,this.form).then((e=>{this.waiting="",ft.AfterRedirect(this.action_after_login,null,e)})).catch((e=>{this.$refs.refPass.setErrors([e.error.statusText]),this.waiting="error"})):this.waiting=""}),3e3)}}},xt=kt,Et=(0,b.Z)(xt,wt,Ct,!1,null,null,null),St=Et.exports,Vt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"content-center"},[t("a",{staticClass:"content-center__img",attrs:{href:"/"}},[t("img",{attrs:{src:e.urlLogo,alt:""}})]),"default"===e.model_register_form?t("div",[t("h3",{staticClass:"content-center__title"},[e._v(e._s(e.messages.login))]),t("div",{staticClass:"form-group content-center__input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.name[0].value,expression:"form.name[0].value"}],staticClass:"form-control",attrs:{type:"text",readonly:"true",name:"name"},domProps:{value:e.form.name[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.name[0],"value",t.target.value)}}})]),e.showPassword?t("h3",{staticClass:"content-center__title"},[e._v(" "+e._s(e.messages.pass)+" ")]):e._e(),e.showPassword?t("div",{staticClass:"form-group content-center__input"},[e.form.password?t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.password[0].value,expression:"form.password[0].value"}],staticClass:"form-control",attrs:{type:"password",name:"pass"},domProps:{value:e.form.password[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.password[0],"value",t.target.value)}}}):e._e()]):e._e(),t("h3",{staticClass:"content-center__title"},[e._v(e._s(e.messages.mail))]),t("ValidationProvider",{ref:"mail",staticClass:"d-block w-100",attrs:{name:"mail",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"form-group content-center__input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.mail[0].value,expression:"form.mail[0].value"}],staticClass:"form-control",attrs:{type:"mail",name:"mail"},domProps:{value:e.form.mail[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.mail[0],"value",t.target.value)}}})]),t("div",{staticClass:"text-danger text-small"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0)]}}],null,!1,3187930093)}),e._l(e.templates,(function(s,a){return t("ValidationProvider",{key:a,ref:s.ref,refInFor:!0,staticClass:"d-block w-100",scopedSlots:e._u([{key:"default",fn:function(a){return[t(s,{tag:"component"}),t("div",{staticClass:"text-danger text-small"},e._l(a.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0)]}}],null,!0)})})),t("div",{staticClass:"content-center__btn"},[t("div",{staticClass:"btn-login btn-login--connexion",on:{click:e.RegisterDefault}},[t("span",{staticClass:"btn-login__text"},[e._v(" "+e._s(e.messages.submit.register)+" ")]),"wait"==e.waiting?t("svgWaiting"):e._e()],1)]),t("hr")],2):e._e(),"generate_password"===e.model_register_form?t("div",[t("h4",{staticClass:"title"},[e._v("Creation automatique du compte")]),t("p",{staticClass:"mb-4"},[e._v(" Vos informations de connexion seront transferés à cette adresse. ")]),e.validEmail(e.form.name[0].value)?t("div",{staticClass:"mb-5"},[t("strong",[e._v(" "+e._s(e.form.name[0].value)+" ")]),e._v(" "+e._s(e.set_email())+" ")]):e._e(),e.validEmail(e.form.name[0].value)?e._e():t("div",[t("ValidationProvider",{ref:"mail",staticClass:"d-block w-100",attrs:{name:"mail",rules:"required"},scopedSlots:e._u([{key:"default",fn:function(s){return[t("div",{staticClass:"form-group content-center__input"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.form.mail[0].value,expression:"form.mail[0].value"}],staticClass:"form-control",attrs:{type:"mail",name:"mail"},domProps:{value:e.form.mail[0].value},on:{input:function(t){t.target.composing||e.$set(e.form.mail[0],"value",t.target.value)}}})]),t("div",{staticClass:"text-danger text-small"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0)]}}],null,!1,3187930093)})],1),t("div",{staticClass:"content-center__btn"},[t("div",{staticClass:"btn-login btn-login--connexion",on:{click:e.generatePassword}},[t("span",{staticClass:"btn-login__text"},[e._v(" "+e._s(e.messages.submit.register)+" ")]),"wait"==e.waiting?t("svgWaiting"):e._e()],1)])]):e._e(),t("a",{staticClass:"text-center d-block",attrs:{href:"#"},on:{click:function(t){return e.$emit("select-stepe","checkstatus")}}},[e._v(" Retour ")])])},Ft=[],Ot={name:"checkstatus",props:{urlLogo:{type:String,required:!0},form:{type:Object,required:!0},formValidate:{type:Object,required:!0},showPassword:{type:Boolean,default:!1},action_after_login:{type:String,required:!0},model_register_form:{type:String,required:!0}},components:{svgWaiting:()=>s.e(487).then(s.bind(s,7487))},data(){return{messages:ft.messages,waiting:"",templates:[]}},mounted(){this.showPassword?void 0===this.form.password&&this.$set(this.form,"password",[{value:""}]):this.form.password&&delete this.form.password,this.getFields()},methods:{async generatePassword(){this.waiting="wait";var e="/login-rx-vuejs/genrate-password";const t=await this.formValidate.validate();t?Me.post(e,this.form).then((e=>{console.log("resp : ",e),this.waiting="",ft.AfterRedirect(this.action_after_login,e)})).catch((()=>{this.waiting=""})):(this.waiting="",console.log("echec de validation de mail"))},async RegisterDefault(){this.waiting="wait";var e="/user/register?_format=json";const t=await this.formValidate.validate();t?Me.post(e,this.form).then((e=>{console.log("resp : ",e),this.waiting="",ft.modalSuccess(ft.msgCreate([this.messages.devisCreateUser]),{title:"Votre compte a été crré",footerClass:"d-none",headerBgVariant:"success",headerTextVariant:"light"}).then((()=>{ft.AfterRedirect(this.action_after_login,e)}))})).catch((e=>{if(this.waiting="",e.error&&e.error.data&&e.error.data.errors){const t=e.error.data.errors;t.forEach((e=>{const t=e.split(":");this.$refs[t[0]]&&(this.$refs[t[0]][0]?this.$refs[t[0]][0].setErrors([t[1]]):this.$refs[t[0]].setErrors([t[1]]))}))}})):this.waiting=""},getFields(){const e=new et("user","user");e.format().then((e=>{this.templates=e.templates;for(const t in e.models)this.$set(this.form,t,e.models[t]);console.log("resp : ",e)}))},validEmail(e){var t=/\S+@\S+\.\S+/;return t.test(e)},set_email(){this.form.mail=this.form.name}}},Pt=Ot,Rt=(0,b.Z)(Pt,Vt,Ft,!1,null,null,null),Bt=Rt.exports,At={props:{action_after_login:{type:String,default:"default"},model_register_form:{type:String,default:"default"}},name:"LoginRegister",components:{},data(){return{messages:ft.messages,waiting:"",form:{name:[{value:""}],mail:[{value:""}]},password:"",mail:"",stepe:yt,models:{},baseURl:Le.baseURl,isBusy:!1,alertDisplay:!1,alertType:"alert-danger",alertText:"",urlLogo:window.location.origin+""+window.logo_current_theme,formValidate:{}}},mounted(){tt.appId=889256191665205,this.TryToLoginWithFacebook(),tt.chargement(),this.formValidate=this.$refs.formValidate},methods:{selectStepe(e){switch(e){case"checkstatus":this.stepe=yt;break;case"setPassword":this.stepe=St;break;case"register":this.stepe=Bt;break}},TryToLoginWithFacebook(){document.addEventListener("wbu-fb-status-change",(()=>{this.isBusy=!0,this.getFields(),Me.post("/login-rx-vuejs/facebook-check",tt.user).then((e=>{this.isBusy=!1,this.alertDisplay=!0,this.alertType="alert-success",this.alertText=" Connexion réussie  ",e.reponse&&e.reponse.config.url!==e.reponse.request.responseURL?window.location.assign(e.reponse.request.responseURL):e.data&&e.data.createuser?this.stepe="final-fb-register":window.location.assign(window.location.origin)})).catch((e=>{this.isBusy=!1,this.isBusy=!1,this.alertDisplay=!0,this.alertType="alert-danger",this.alertText="Facebook : Erreur de connexion ",e.error&&(this.alertText=e.error.statusText)}))}),!1)},IsBusy(){this.isBusy=!0,console.log("this.isbusy",this.isBusy)},async finalRegister(){this.waiting="wait";var e={},t="";"final-gl-register"===this.stepe?(t="/login-rx-vuejs/google-login",e={fields:this.models,google:[]}):"final-fb-register"===this.stepe&&(t="/login-rx-vuejs/facebook-login",e={fields:this.models,facebook:tt.user});const s=await this.$refs.formValidate.validate();s&&Me.post(t,e).then((e=>{console.log(e),this.waiting="",e.reponse&&e.reponse.config.url!==e.reponse.request.responseURL&&window.location.assign(e.reponse.request.responseURL)}))}}},Tt=At,$t=(0,b.Z)(Tt,ut,mt,!1,null,null,null),qt=($t.exports,{name:"MultiSelect",components:{ValidationProvider:h.d_,Multiselect:$e()},props:{classCss:{type:[Array],default:function(){return[]}},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0},namespaceStore:{type:String,required:!0}},data(){return{isLoading:!1,options:[]}},methods:{getValidationState({dirty:e,validated:t,valid:s=null}){return!e&&!t||s?null:s},getRules(){return es.getRules(this.field)},setValue(e){this.namespaceStore?this.$store.dispatch(this.namespaceStore+"/setValue",{value:e,fieldName:this.field.name}):this.$store.dispatch("setValue",{value:e,fieldName:this.field.name})},getValue(){return this.model[this.field.name]&&this.model[this.field.name][0]?this.model[this.field.name][0].value:null},nameWithLang({text:e}){return`${e}`},asyncFind(e){if(e.length>=2){let t="domaine_competance";const s=new We(t);this.isLoading=!0,s.getSearch(e).then((()=>{this.options=s.getOptions(),this.isLoading=!1}))}},selectUser(e){const t=[];t.push({target_id:e.value}),this.setValue(t)}}}),Nt=qt,Lt=(0,b.Z)(Nt,Be,Ae,!1,null,null,null),jt=Lt.exports,It=function(){var e=this,t=e._self._c;return t("div",{staticClass:"complexe_field",class:e.classCss},[t("h4",{directives:[{name:"show",rawName:"v-show",value:!e.showFormEdit,expression:"!showFormEdit"}],staticClass:"font-weight-bold"},[e._v(e._s(e.field.label))]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showFormEdit,expression:"!showFormEdit"}],staticClass:"pb-3 field-mutiple",attrs:{id:e.idHtml}},e._l(e.model[e.field.name],(function(s,a){return t("div",{key:a,staticClass:"field-item-value mb-4"},[t("div",{staticClass:"bg-light p-4 px-5"},[t("div",{staticClass:"d-flex justify-content-between align-items-center"},[t("div",{staticClass:"text"},[e.terms["tid-"+s.target_id]?t("div",{staticClass:"font-weight-bold"},[e._v(" "+e._s(e.terms["tid-"+s.target_id].name)+" ")]):e._e(),e.terms["tid-"+s.target_id]?e._e():t("i",{staticClass:"text-muted font-weight-bold"},[e._v(" Competance ... ")]),t("div",{staticClass:"d-flex"},[t("span",[e._v(" "+e._s(e.field.entity_form_settings.niveau_options[s.niveau])+" ")])])]),t("div",{staticClass:"icon-buttons"},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn-action mr-5",attrs:{variant:"light",title:"Editer"},on:{click:function(t){return e.Edit(s)}}},[t("b-icon",{attrs:{icon:"pencil-fill",variant:"secondary","font-scale":"1"}})],1),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn-action btn-drag-drop mr-5",attrs:{variant:"light",title:"Glisser-déposer"}},[t("b-icon",{attrs:{icon:"arrows-move",variant:"secondary","font-scale":"1"}})],1),t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn-action mr-4",attrs:{variant:"light",title:"Supprimer"},on:{click:function(t){return e.removeField(a)}}},[t("b-icon",{attrs:{icon:"trash-fill",variant:"secondary","font-scale":"1"}})],1)])])])])})),0),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.showFormEdit,expression:"!showFormEdit"}],staticClass:"add-new-card",on:{click:e.add}},[t("div",{staticClass:"anc-content d-flex align-items-center"},[t("b-icon",{staticClass:"text-info",attrs:{icon:"plus-circle-fill","font-scale":"1.5"}}),t("h4",{staticClass:"anc-titre"},[e._v(e._s(e.addButtonTitle))])],1)]),e.showFormEdit?t("EditValueNiveau",{attrs:{"f-value":e.currentEditValue,field:e.field,terms:e.terms},on:{closeEditForm:e.closeEditForm,setValue:e.setValue,addTermsInCache:e.addTermsInCache}}):e._e()],1)},Mt=[],Ut=function(){var e=this,t=e._self._c;return t("div",{class:e.classCss},[t("div",{staticClass:"p-3 py-5",on:{click:function(t){return e.$emit("closeEditForm")}}},[t("span",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],staticClass:"btn-action btn-back",attrs:{variant:"light",title:"Back"}},[t("b-icon",{attrs:{icon:"arrow-left",variant:"secondary","font-scale":"1"}}),e._v(" Retour ")],1)]),t("div",{staticClass:"add-item-form"},[t("ValidationProvider",{attrs:{name:e.field.name,rules:e.getRules()},scopedSlots:e._u([{key:"default",fn:function(s){return[t("b-form-group",{attrs:{label:e.settings.label_target_id}},[t("div",{staticClass:"autocomplete"},[t("multiselect",{attrs:{options:e.options,"custom-label":e.nameWithLang,placeholder:"",label:"text","track-by":"text","show-no-results":!1,showLabels:!1,loading:e.isLoading},on:{"search-change":e.asyncFind,select:e.selectUser},model:{value:e.value_select,callback:function(t){e.value_select=t},expression:"value_select"}},[t("template",{slot:"noResult"},[t("span",{staticClass:"option__titl d-none"},[e._v(" Aucun contenu ")])]),t("template",{slot:"placeholder"},[t("span",{staticClass:"option__title"},[e._v(" Le terme n'existe pas ")])]),t("template",{slot:"noOptions"},[t("span",{staticClass:"option__title"},[e._v(" Saisir un terme ")])])],2),t("div",{staticClass:"text-danger"},e._l(s.errors,(function(s,a){return t("small",{key:a,staticClass:"d-block"},[e._v(" "+e._s(s)+" ")])})),0)],1)]),t("div",{staticClass:"fi-input"},[t("label",{attrs:{for:"input-niveau"}},[e._v(e._s(e.settings.label_niveau))]),t("b-form-select",{attrs:{id:"input-niveau",type:"text",placeholder:"Titre",required:"",options:e.optionsNiveau},on:{change:e.selectNiveau},model:{value:e.form.niveau,callback:function(t){e.$set(e.form,"niveau",t)},expression:"form.niveau"}}),t("b-form-text",[e._v(" p.ex. Moyen ")])],1)]}}])})],1)])},Dt=[];class Zt{constructor(e){this.name=e}getValue(){return this.name}}var Ht={name:"MultiSelect",components:{ValidationProvider:h.d_,Multiselect:$e()},props:{classCss:{type:[Array],default:function(){return[]}},field:{type:Object,required:!0},fValue:{type:Object,require:!0,default:function(){return{}}},terms:{type:[Object],default:function(){return{}}}},data(){return{isLoading:!1,options:[],form:{},value_select:null}},computed:{settings(){return this.field.entity_form_settings?this.field.entity_form_settings:{}},optionsNiveau(){if(this.field.entity_form_settings&&this.field.entity_form_settings.niveau_options){const e=[];for(const t in this.field.entity_form_settings.niveau_options)e.push({text:this.field.entity_form_settings.niveau_options[t],value:t});return e}return[]}},mounted(){const e=new Zt(this.fValue);this.form=e.getValue(),this.buildDefaultOptions()},methods:{getValidationState({dirty:e,validated:t,valid:s=null}){return!e&&!t||s?null:s},getRules(){return es.getRules(this.field)},getValue(){return this.model[this.field.name]&&this.model[this.field.name][0]?this.model[this.field.name][0].value:null},nameWithLang({text:e}){return`${e}`},asyncFind(e){if(e.length>=2){let t="domaine_competance";const s=new We(t);this.isLoading=!0,s.getSearch(e).then((()=>{this.options=s.getOptions(),this.isLoading=!1,this.$emit("addTermsInCache",s.terms.data)}))}},selectUser(e){console.log("update input Term : ",e.value),this.form.target_id=e.value,this.$emit("setValue",e)},selectNiveau(){console.log("update input Niveau"),this.$emit("setValue")},buildDefaultOptions(){for(const e in this.terms){const t={text:this.terms[e].name,value:this.terms[e].drupal_internal__tid};this.options.push(t),this.terms[e].drupal_internal__tid==this.form.target_id&&(this.value_select=t)}}}},Wt=Ht,zt=(0,b.Z)(Wt,Ut,Dt,!1,null,null,null),Gt=zt.exports;const Jt=()=>({target_id:null,niveau:1});var Yt={name:"MultiSelect",components:{EditValueNiveau:Gt},props:{classCss:{type:[Array],default:function(){return[]}},field:{type:Object,required:!0},model:{type:[Object,Array],required:!0},namespaceStore:{type:String,required:!0},addButtonTitle:{type:String,default:"Ajouter"}},data(){return{idHtml:"sort-"+Math.random().toString(36),currentEditValue:{},showFormEdit:!1,terms:{}}},mounted(){var e=document.getElementById(this.idHtml);this.loadDefaults(),ve.ZP.create(e,{animation:150,handle:".btn-drag-drop",ghostClass:"blue-background-class"})},methods:{add(){this.$emit("addNewValue",Jt())},removeField(e){console.log("removeField in fields : ",e),this.$emit("removeField",e)},Edit(e){this.currentEditValue=e,this.showFormEdit=!0},closeEditForm(){this.showFormEdit=!1},getTermByTid(e){if(!this.terms["tid-"+e]){console.log("help : getTermByTid");let t="domaine_competance";const s=new We(t);s.getValueByTid(e).then((t=>{t.data[0]&&t.data[0].attributes?this.$set(this.terms,"tid-"+e,t.data[0].attributes):this.$set(this.terms,"tid-"+e,{}),console.log(this.terms)}))}},addTermsInCache(e){e.forEach((e=>{this.terms["tid-"+e.attributes.drupal_internal__tid]||this.$set(this.terms,"tid-"+e.attributes.drupal_internal__tid,e.attributes)}))},loadDefaults(){this.model[this.field.name].forEach((e=>{this.getTermByTid(e.target_id)}))},setValue(){console.log("set value : ");const e=[];this.model[this.field.name].forEach((t=>{t.target_id&&e.push(t)})),this.namespaceStore?this.$store.dispatch(this.namespaceStore+"/setValue",{value:e,fieldName:this.field.name}):this.$store.dispatch("setValue",{value:e,fieldName:this.field.name})}}},Xt=Yt,Kt=(0,b.Z)(Xt,It,Mt,!1,null,"169620ed",null),Qt=Kt.exports;m().use(Re());var es={debug:!1,config:{},getField(e){var t,s=e.type;switch("list_string"==s&&1==e.cardinality&&(s="boolean"),this.debug&&console.log(" key : ",s),s){case"string":t=w;break;case"link":t=V;break;case"color_theme_field_type":t=A;break;case"boolean":t=Z;break;case"list_string":t=Y;break;case"render_html":t=le;break;case"text_long":t=se;break;case"image":t=fe;break;case"experience_type":t=Oe;break;case"entity_reference":"taxonomy_term"==e.settings.target_type?t=jt:console.log("Champs sans rendu :",s,"\n field : ",e);break;case"value_niveau_type":t=Qt;break;default:console.log("Champs sans rendu :",s,"\n field : ",e);break}return t},getImageUrl(e,t="medium"){return this.config.get("/vuejs-entity/image/"+e+"/"+t)},getRules(e){const t={};if(e.constraints)for(const s in e.constraints)"NotNull"==s&&(t["required"]=!0);return t},getConfig(e){this.config=e}},ts={props:{showSubmit:{type:Boolean,default:!1}},data(){return{show:!0}},computed:{...(0,c.rn)({form:e=>e.currentEntityForm.form,model:e=>e.currentEntityForm.model}),idEntity(){if(""!==this.form.label){var e=d.Z.generateIdEntityType(this.form.label);return this.setId(e),e}return""}},mounted(){es.getConfig(d.Z)},methods:{onSubmit(e){e.preventDefault(),this.submit()},submit(){return this.$store.dispatch("saveEntity")},onReset(e){e.preventDefault(),this.form.id="",this.form.label="",this.form.description="",this.form.users=[],this.show=!1,this.$nextTick((()=>{this.show=!0}))},setId(e){this.form.uuid||(this.form.id=e)},buildFields(){const e=[];for(const t in this.form)e.push({template:es.getField(this.form[t]),field:this.form[t],model:this.model});return e},addNewValue(e,t){this.model[t.field.name].push(e)},removeField(e,t){this.model[t.field.name].splice(e,1)}}},ss=ts,as=(0,b.Z)(ss,n,l,!1,null,null,null),is=as.exports,rs={components:{formEdit:is},props:{manageModal:{type:Boolean,default:!1}},computed:{openModel:{get(){return!!this.manageModal},set(e){this.$emit("closeModal",e)}}},methods:{handleOk(){this.$refs.formEdit.submit().then((()=>{this.$bvModal.hide("b-modal-manage-project"),window.location.assign(window.location.pathname)})).catch((e=>{console.log("error : ",e)}))}}},os=rs,ns=(0,b.Z)(os,r,o,!1,null,null,null),ls=ns.exports,ds={name:"EditEntity",components:{modalForm:ls},data(){return{titleModal:"",manageModal:!1}},computed:{...(0,c.rn)({currentEntityInfo:e=>e.currentEntityInfo})},mounted(){this.check_edit_entity()},methods:{check_edit_entity(){document.addEventListener("formatage_models_data_quick_edit_vuejs",(e=>{e.detail&&e.detail.id&&(this.currentEntityInfo.id&&e.detail.id!=this.currentEntityInfo.id?this.$store.dispatch("cleanDatas").then((()=>{console.log("data is clean"),this.initEdit(e)})):this.initEdit(e))}),!1)},initEdit(e){this.openModal(),this.$store.dispatch("set_currentEntityForm",e.detail).then((()=>{this.$store.dispatch("loadForm")}))},openModal(){this.manageModal?this.manageModal=!1:this.manageModal=!0},closeModal(){this.manageModal=!1}}},cs=ds,us=(0,b.Z)(cs,a,i,!1,null,null,null),ms=us.exports}}]);
//# sourceMappingURL=EditEntity.umd.min.17.js.map